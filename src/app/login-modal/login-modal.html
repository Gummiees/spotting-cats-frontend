

<app-modal
[isOpen]="isOpen()"
confirmText=""
cancelText=""
[displayButtons]="false"
(onConfirm)="onConfirmModal()"
(onCancel)="onCancelModal()"
>
  <content>
      <form [formGroup]="isOnCodeStep() ? codeForm : emailForm" (ngSubmit)="onConfirmModal()">
        <div class="sm:flex sm:items-start">
          <div class="bg-violet-100 mx-auto flex size-12 shrink-0 items-center justify-center rounded-full sm:mx-0 sm:size-10">
            <span class="text-violet-500 material-symbols-outlined leading-none align-middle !text-[24px]">account_circle</span>
          </div>
          <div [ngClass]="{'flex-1': isFullWidth}" class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
            <h3 class="text-base font-semibold text-gray-900" id="dialog-title">{{ title }}</h3>
            <div class="mt-2">
              <p class="text-sm text-gray-500">{{ message }}</p>
            </div>
          </div>
        </div> 
        @if(isOnCodeStep()) {
          <input 
          class="mt-2 block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-600 sm:text-sm sm:leading-6"
          formControlName="code"
          type="number" 
          autocomplete="one-time-code"
          placeholder="Enter code" 
          />
        } @else {
          <input 
          class="mt-2 block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-600 sm:text-sm sm:leading-6"
          formControlName="email"
          type="email" 
          autocomplete="email"
          placeholder="Enter email" 
          />
        }
      </form>
  </content>
  <footer class="w-full">
    <div class="bg-gray-50 flex w-full justify-between">
      @if(shouldDisplayResendButton) {
        <app-primary-button class="flex flex-row-reverse gap-x-2" type="info" [isDisabled]="isResendButtonDisabled" [isLoading]="loadingButton()" [buttonText]="resendButtonText" (onClick)="onResendCode()" />
      }
      <div class="flex flex-row-reverse gap-x-2" [ngClass]="{'w-full': !shouldDisplayResendButton}">
        <app-primary-button buttonType="submit" [isLoading]="loadingButton()" [buttonText]="confirmText" [isDisabled]="isDisabled" (onClick)="onConfirmModal()"  />
        <app-secondary-button [isLoading]="loadingButton()" [buttonText]="cancelText" (onClick)="onCancelModal()" />
      </div>
    </div>
  </footer>
</app-modal>