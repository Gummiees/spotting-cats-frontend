<app-modal
confirmText="Delete"
cancelText="Cancel"
confirmColor="danger"
[isLoading]="loadingDelete()"
[isOpen]="isDeleteModalOpen()"
(onConfirm)="onConfirmDelete()"
(onCancel)="onDeleteModalClose()"
>
  <content>
    <app-modal-content-simple
      title="Delete cat"
      message="Are you sure you want to delete it forever?"
      icon="delete_forever"
      modalType="danger"
    />
  </content>
</app-modal>

@if(cat() === null || catNotFound()) {
  <app-not-found />
} @else {
<main class="p-3 h-[calc(100vh-4rem)] flex flex-col md:h-auto">
  <div class="p-4 bg-white rounded-sm shadow-sm flex flex-col gap-2 max-h-full overflow-hidden flex-1">
    <div class="flex items-center justify-between gap-x-2">
      <div class="flex items-center gap-2">
        <h1 class="text-2xl font-bold wrap-anywhere">{{cat()!.name}}</h1>
        @if(cat()!.isUserOwner === true) {
          <span class="material-symbols-outlined text-violet-500 !text-[18px]">verified</span>
        }
      </div>
      <div class="flex items-center gap-x-1">
        <span>{{ cat()!.totalLikes }}</span>
        <span class="material-symbols-outlined cursor-pointer z-1" [ngClass]="{'text-red-500': cat()!.isLiked}" [style.fontVariationSettings]="cat()!.isLiked ? '\'FILL\' 1' : '\'FILL\' 0'" (click)="onLikeClick($event)">favorite</span>
        @if(isCurrentUserOwner) {
          <app-icon-button icon="edit" (click)="onEditClick($event)" />
          <app-icon-button icon="delete" type="danger" (click)="onDeleteClick($event)" />
        }
      </div>
    </div>
    @if(cat()!.extraInfo) {
      <div class="text-sm text-gray-700">{{ cat()!.extraInfo }}</div>
    }
    <app-cat-badges [cat]="cat()!"/>
    <app-cat-address [cat]="cat()!"/>
    <div class="flex flex-col gap-y-2 md:flex-row md:gap-x-2 h-full md:h-auto">
      <div class="w-full flex-1 rounded-md min-h-[100px] sm:min-h-[200px]" leaflet [leafletOptions]="leafletOptions()" [leafletLayers]="leafletLayers()">
      </div>
      <div class="min-w-0 min-h-0 max-w-[400px] md:min-w-[400px] flex-shrink">
        @if(carouselItems() && carouselItems()!.length > 0) {
          <app-carousel [items]="carouselItems()!" />
        } @else {
        <div class="flex items-center justify-center h-full">
          <i class="fa-solid fa-cat text-gray-500 !text-[100px] py-6"></i>
        </div>
        }
      </div>
    </div>
    <div class="flex items-center justify-between gap-x-2">
      @if(cat()!.username) {
      <a [routerLink]="['/user', cat()!.username]" class="text-xs text-violet-700 hover:underline">{{ cat()!.username }}</a>
      } @else {
        <span class="text-xs text-gray-500">Deleted user</span>
      }
      <span class="text-xs text-gray-500">{{ cat()!.createdAt | minutesAgo }}</span>
    </div>
  </div>
</main>
}